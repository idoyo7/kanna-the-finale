var getPSImageSize=function(el){var size=new Array();size[0]=el.naturalWidth?el.naturalWidth:(el.width?el.width:0);size[1]=el.naturalHeight?el.naturalHeight:(el.height?el.height:0);if(!size[0]||!size[1]){var test=new Image();test.src=el.src;size[0]=test.naturalWidth?test.naturalWidth:(test.width?test.width:1000);size[1]=test.naturalHeight?test.naturalHeight:(test.height?test.height:1000)}
return size}
var initPhotoSwipeFromDOM=function(gallerySelector){var ps_skip_class='.rx-escape, .photoswipe-escape',ps_skip_elements_array=['a','pre','xml','textarea','input','select','option','code','script','style','iframe','button','img','embed','object','ins'],ps_skip_elements='';ps_skip_elements_array.forEach(function(el,i){ps_skip_elements+=el+' img,'});var ps_enroll_class='.photoswipe-images';var ps_find_selector='img:not('+ps_skip_elements+ps_skip_class+'), img'+ps_enroll_class;var parseThumbnailElements=function(el){var imgElements=$(el).find(ps_find_selector),numNodes=imgElements.length,items=[],imgEl,size,item;for(var i=0;i<numNodes;i++){imgEl=imgElements.get(i);if(imgEl.nodeType!==1||!imgEl.src||!$(imgEl).attr('data-pswp-pid')){continue}
size=getPSImageSize(imgEl);item={src:$(imgEl).attr('src'),w:parseInt(size[0],10),h:parseInt(size[1],10),pid:$(imgEl).attr('data-pswp-pid')};var ps_skip_alt_class='.photoswipe-no-caption';if(imgEl.alt&&!$(imgEl).is(ps_skip_alt_class)){item.title=imgEl.alt}
if(imgEl.title&&!$(imgEl).is(ps_skip_alt_class)){item.title=imgEl.title}
item.el=imgEl;items.push(item)}
return items};var closest=function closest(el,fn){return el&&(fn(el)?el:closest(el.parentNode,fn))};var onThumbnailsClick=function(e){var eTarget=e.target||e.srcElement;var clickedListItem=closest(eTarget,function(el){return(el.tagName&&el.tagName.toUpperCase()==='IMG'&&el.hasAttribute('data-pswp-pid'))});if(!clickedListItem){return}
e=e||window.event;e.preventDefault?e.preventDefault():e.returnValue=!1;var clickedGallery=$(clickedListItem).closest(gallerySelector).get(0),childNodes=$(clickedGallery).find(ps_find_selector),numChildNodes=childNodes.length,nodeIndex=0,index;for(var i=0;i<numChildNodes;i++){if(childNodes[i].nodeType!==1||!$(childNodes[i]).attr('data-pswp-pid')){continue}
if(childNodes[i]===clickedListItem){index=nodeIndex;break}
nodeIndex++}
if(index>=0){openPhotoSwipe(index,clickedGallery,!1,!1)}
return!1};var photoswipeParseHash=function(){var hash=window.location.hash.substring(1),params={};if(hash.length<5){return params}
var vars=hash.split('&');for(var i=0;i<vars.length;i++){if(!vars[i]){continue}
var pair=vars[i].split('=');if(pair.length<2){continue}
params[pair[0]]=pair[1]}
if(params.gid){params.gid=parseInt(params.gid,10)}
return params};var openPhotoSwipe=function(index,galleryElement,disableAnimation,fromURL){var pswpElement=document.querySelectorAll('.pswp')[0],gallery,options,items;items=parseThumbnailElements(galleryElement);options={galleryUID:galleryElement.getAttribute('data-pswp-uid'),getThumbBoundsFn:function(index){var thumbnail=items[index].el,pageYScroll=window.pageYOffset||document.documentElement.scrollTop,rect=thumbnail.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width}},addCaptionHTMLFn:function(item,captionEl,isFake){if(!item.title){captionEl.children[0].innerText='';return!1}
captionEl.children[0].innerHTML=item.title;return!0},};if(fromURL){if(options.galleryPIDs){for(var j=0;j<items.length;j++){if(items[j].pid==index){options.index=j;break}}}else{options.index=parseInt(index,10)-1}}else{options.index=parseInt(index,10)}
if(isNaN(options.index)){return}
if(disableAnimation){options.showAnimationDuration=0}
gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init()};var galleryElements=document.querySelectorAll(gallerySelector);for(var i=0,l=galleryElements.length;i<l;i++){galleryElements[i].setAttribute('data-pswp-uid',i+1);galleryElements[i].onclick=onThumbnailsClick;var regx_skip=/(?:(modules|addons|classes|common|layouts|libs|widgets|widgetstyles)\/)/i;var regx_allow_i6pngfix=/(?:common\/tpl\/images\/blank\.gif$)/i;var galleryImgEls=$(galleryElements[i]).find(ps_find_selector);for(var j=0,jl=galleryImgEls.length;j<jl;j++){if(regx_skip.test($(galleryImgEls[j]).attr('src'))&&!regx_allow_i6pngfix.test($(galleryImgEls[j]).attr('src')))continue;$(galleryImgEls[j]).attr('data-pswp-pid',j+1)}}
var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],!0,!0)}
window.addEventListener("hashchange",function(){var hashData=photoswipeParseHash();if(hashData.pid&&hashData.gid){openPhotoSwipe(hashData.pid,galleryElements[hashData.gid-1],!0,!0)}},!1)};initPhotoSwipeFromDOM('.rhymix_content, .xe_content')